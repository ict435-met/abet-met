<?php
/* Define the Courses data then do all processing 
 * All pages at ROOT/documentation/courses/*
 * will run this
*/

$metCourses = array(
/* SAMPLE SAMPLE SAMPLE
 *  "univ100" => array (
 *  	"title" => "NMSU for Dummies",
 *      "description" => "Underwater basketweaving, rocket surgery.",
 *      "syllabus" => "files/univ100-syllabi.pdf",
 *      "good" => "files/univ100-good.pdf",
 *      "average" => "files/univ100-average.pdf",
 *      "bad" => "files/univ100-bad.pdf"
 *		) // END univ100
 */
 
 //MET Courses
 	"et120-ecet" => array (
		"title" => "Introduction to Computer-Aided Drafting and Design",
		"description" => "The use of database, spreadsheet, and presentation software in the field of engineering technology. Introduction to Internet resources and construction of homepages.",		
		"good" => "files/test.pdf",
		"average" => "files/test.pdf",
		"bad" => "files/test.pdf",
		"syllabus" => "files/course-syllabi/abet_ET120_ECET_2011.pdf"
	), // END et110
	"et182" => array (
		"title" => "Digital Logic",
		"description" => "The use of truth tables, Boolean equations, and diagrams to define, simplify, and implement logic-valued functions."
	), // END et182
	"et190" => array (
		"title" => "Applied Circuits"
	), // END et182
	"et210" => array (
		"title" => "Computer-Aided Design"
	), // END et210
	"et240" => array (
		"title" => "Applied Statics"
	), //END et240
	"et241" => array (
		"title" => "Applied Dynamics"
	), //END et241
	"et217" => array (
		"title" => "Manufacturing Processes (with Lab)"
	), //END et217
	"et328" => array (
		"title" => "Kinematics of Machines"
	), //END et328
	"et310" => array (
		"title" => "Applied Stength of Materials (with lab)"
	), //END et310
	"et308" => array (
		"title" => "Fluid Technology (with lab)"
	), //END et308
	"et306" => array (
		"title" => "Fundamental and Applied Thermodynamics (with Lab)"
	), //END et306
	"et396" => array (
		"title" => "Heat Transfer and Applications"
	), //END et396
	"et426" => array (
		"title" => "Analysis/Design of Machine Elements"
	), //END et426
	"et435" => array (
		"title" => "Senior Design and Project Management"
	),
	"et305" => array (
		"title" => "Design for Manufacturing"
	), //END et305
	"et410" => array (
		"title" => "Senior Seminar"
	), //END et410
	"et422" => array (
		"title" => "Mechanical Measurements"
	), //END et422
	"et402" => array (
		"title" => "Instrumentation"
	), //END et402
	
); // END $metCourses

/* Process the page */

$bread[] = array("Courses", SITE_ROOT."documentation/courses/");

if (count($pageUrl) >= 3 && array_key_exists($pageUrl[2], $metCourses)) {
	/* Move selected course into easy to use variable */
	$course = $metCourses[$pageUrl[2]];
	$course['shortTitle'] = strtoupper($pageUrl[2]);
	
	/* If the requested page is one of the four pdf files, serve them then quit */	
	$docArray = array("syllabus.pdf","good.pdf","average.pdf","bad.pdf");
	if (count($pageUrl) == 4 && in_array($pageUrl[3], $docArray)) {
		// Convert sample-*.pdf to sample_* to grab actual file location from array
		$t_sFile = str_replace('-','_',substr($pageUrl[3], 0, -4));
		$file = $course[$t_sFile];
		if (!isset($file)) {
			$file = 'files/test.pdf';
		}

		outputPDF($file, $t_sFile);
	}
		
	$bread[] = array($course['shortTitle'], SITE_ROOT."documentation/courses/".$pageUrl[2]);
	$smarty->assign("ContentTitle",$course['shortTitle']);
	$smarty->assign("ContentSubtitle",$course['title']);
	
	if(isset($course['description'])) { // Only add a section for the course desc if it exists.
		$sections[] = array(
			"title" => "Course Description",
			"content" => $course['description']
		);
	}
	
	$sections[] = array(
		"title" => "Syllabi",
		"content" => '<a href="syllabus.pdf" role="menuitem" class="list-group-item">'.$course['shortTitle'].' Syllabus<span class="badge">pdf</span></a>'
	);


	$t_sHW = "";
	foreach (array("good","average","bad") as $i) {
			$t_sHW .= '<a href="'.$i.'.pdf" role="menuitem" class="list-group-item">The '.ucfirst($i).'<span class="badge">pdf</span></a>';
	}
		$sections[] = array("title" => "Sample Homework",
			      "content" => '<div class="list-group" role="menu">'.$t_sHW.'</div>');
} else {
	$pageTemplate = 'one-column.tpl';

	$smarty->assign("ContentTitle", "Courses");
	$smarty->assign("ContentSubtitle","Mechanical Engineering Technology");
	$url = SITE_ROOT . "documentation/courses/";
	$sections = array();
	foreach($metCourses as $c_title => $c_data) {
		$sections[] =  array(
			"title" => strtoupper($c_title)." - ".$c_data['title'],
		      "titleLink" => $url.$c_title."/",
		      "content" => (isset($c_data['description'])) ? $c_data['description'] : ''); // Print course description if it exits
	}
}
?>
